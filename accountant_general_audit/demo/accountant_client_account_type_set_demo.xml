<?xml version="1.0" ?>
<!-- Copyright 2020 OpenSynergy Indonesia
     Copyright 2020 PT. Simetri Sinergi Indonesia
     License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl-3.0) -->
<openerp>
<data>
    <record id="demo_trading_set" model="accountant.client_account_type_set">
        <field name="name">Trading &amp; Service</field>
        <field name="code">T001</field>
        <field
                name="detail_ids"
                eval="[(6, 0, [ref('acc_type_t001'),ref('acc_type_t002'),ref('acc_type_t003'),ref('acc_type_t004'),ref('acc_type_t005'),ref('acc_type_t006'),ref('acc_type_t007'),ref('acc_type_t008'),ref('acc_type_t009'),ref('acc_type_t010'),ref('acc_type_t011'),ref('acc_type_t012'),ref('acc_type_t013'),ref('acc_type_t014'),ref('acc_type_t015'),ref('acc_type_t016'),ref('acc_type_t017'),ref('acc_type_t018'),ref('acc_type_t019'),ref('acc_type_t020'),ref('acc_type_t021'),ref('acc_type_t022'),ref('acc_type_t023'),ref('acc_type_t024'),ref('acc_type_t025'),ref('acc_type_t026'),ref('acc_type_t027'),ref('acc_type_t028'),ref('acc_type_t029'),ref('acc_type_t030'),ref('acc_type_t031'),ref('acc_type_t032'),ref('acc_type_t033'),ref('acc_type_t034'),ref('acc_type_t035'),ref('acc_type_t036'),ref('acc_type_t037'),ref('acc_type_t038'),ref('acc_type_t039'),ref('acc_type_t040'),ref('acc_type_t041'),ref('acc_type_t042'),ref('acc_type_t043')])]"
            />
    </record>

    <record
            id="demo_trading_set_computation_001"
            model="accountant.client_account_type_computation_item"
        >
        <field name="account_type_set_id" ref="demo_trading_set" />
        <field name="computation_id" ref="computation_item_001" />
        <field name="python_code">result = result_extrapolation = result_previous = 0.0
CURRENT_ASSET_ID = env.ref("accountant_general_audit.acc_group_t001").id
NON_CURRENT_ASSET_ID = env.ref("accountant_general_audit.acc_group_t002").id

obj_detail = env["accountant.client_trial_balance_standard_detail"]

criteria = [
    ("type_id.group_id.id", "in", [CURRENT_ASSET_ID, NON_CURRENT_ASSET_ID]),
    ("trial_balance_id", "=", document.trial_balance_id.id),
]

for data in obj_detail.search(criteria):
    result = result + data.balance
    result_extrapolation = result_extrapolation + data.extrapolation_balance
    result_previous = result_previous + data.previous_balance</field>
    </record>

    <record
            id="demo_trading_set_computation_002"
            model="accountant.client_account_type_computation_item"
        >
        <field name="account_type_set_id" ref="demo_trading_set" />
        <field name="computation_id" ref="computation_item_002" />
        <field name="python_code">result = result_extrapolation = result_previous = 0.0
CURRENT_ASSET_ID = env.ref("accountant_general_audit.acc_group_t001").id
NON_CURRENT_ASSET_ID = env.ref("accountant_general_audit.acc_group_t002").id
SHORT_LIABILITY_ID = env.ref("accountant_general_audit.acc_group_t003").id
LONG_LIABILITY_ID = env.ref("accountant_general_audit.acc_group_t004").id

obj_detail = env["accountant.client_trial_balance_standard_detail"]

criteria = [
    ("type_id.group_id.id", "in", [CURRENT_ASSET_ID, NON_CURRENT_ASSET_ID, SHORT_LIABILITY_ID, LONG_LIABILITY_ID]),
    ("trial_balance_id", "=", document.trial_balance_id.id),
]

for data in obj_detail.search(criteria):
    result = result + data.balance
    result_extrapolation = result_extrapolation + data.extrapolation_balance
    result_previous = result_previous + data.previous_balance</field>
    </record>

    <record
            id="demo_trading_set_computation_003"
            model="accountant.client_account_type_computation_item"
        >
        <field name="account_type_set_id" ref="demo_trading_set" />
        <field name="computation_id" ref="computation_item_003" />
        <field name="python_code">result = result_extrapolation = result_previous = 0.0
REVENUE_ID = env.ref("accountant_general_audit.acc_group_t008").id
OTHER_REVENUE_ID = env.ref("accountant_general_audit.acc_group_t009").id
OCI_ID = env.ref("accountant_general_audit.acc_group_t010").id


obj_detail = env["accountant.client_trial_balance_standard_detail"]

criteria = [
    ("type_id.group_id.id", "in", [REVENUE_ID, OTHER_REVENUE_ID, OCI_ID]),
    ("trial_balance_id", "=", document.trial_balance_id.id),
]

for data in obj_detail.search(criteria):
    result = result + data.balance
    result_extrapolation = result_extrapolation + data.extrapolation_balance
    result_previous = result_previous + data.previous_balance</field>
    </record>

    <record
            id="demo_trading_set_computation_004"
            model="accountant.client_account_type_computation_item"
        >
        <field name="account_type_set_id" ref="demo_trading_set" />
        <field name="computation_id" ref="computation_item_004" />
        <field name="python_code">result = result_extrapolation = result_previous = 0.0
COR_ID = env.ref("accountant_general_audit.acc_group_t011").id

obj_detail = env["accountant.client_trial_balance_standard_detail"]

criteria = [
    ("type_id.group_id.id", "in", [COR_ID]),
    ("trial_balance_id", "=", document.trial_balance_id.id),
]

for data in obj_detail.search(criteria):
    result = result + data.balance
    result_extrapolation = result_extrapolation + data.extrapolation_balance
    result_previous = result_previous + data.previous_balance</field>
    </record>

    <record
            id="demo_trading_set_computation_005"
            model="accountant.client_account_type_computation_item"
        >
        <field name="account_type_set_id" ref="demo_trading_set" />
        <field name="computation_id" ref="computation_item_005" />
        <field name="python_code">result = result_extrapolation = result_previous = 0.0
REVENUE_ID = env.ref("accountant_general_audit.acc_group_t008").id
OTHER_REVENUE_ID = env.ref("accountant_general_audit.acc_group_t009").id
OCI_ID = env.ref("accountant_general_audit.acc_group_t010").id
COR_ID = env.ref("accountant_general_audit.acc_group_t011").id
EXPENSE_ID = env.ref("accountant_general_audit.acc_group_t012").id
OTHER_EXPENSE_ID = env.ref("accountant_general_audit.acc_group_t013").id

obj_detail = env["accountant.client_trial_balance_standard_detail"]

criteria = [
    ("type_id.group_id.id", "in", [REVENUE_ID, OTHER_REVENUE_ID, OCI_ID]),
    ("trial_balance_id", "=", document.trial_balance_id.id),
]

for data in obj_detail.search(criteria):
    result = result + data.balance
    result_extrapolation = result_extrapolation + data.extrapolation_balance
    result_previous = result_previous + data.previous_balance

criteria = [
    ("type_id.group_id.id", "in", [COR_ID, EXPENSE_ID, OTHER_EXPENSE_ID]),
    ("trial_balance_id", "=", document.trial_balance_id.id),
]

for data in obj_detail.search(criteria):
    result = result - data.balance
    result_extrapolation = result_extrapolation - data.extrapolation_balance
    result_previous = result_previous - data.previous_balance</field>
    </record>

    <record
            id="demo_trading_set_computation_006"
            model="accountant.client_account_type_computation_item"
        >
        <field name="account_type_set_id" ref="demo_trading_set" />
        <field name="computation_id" ref="computation_item_006" />
    </record>

    <record
            id="demo_trading_set_computation_007"
            model="accountant.client_account_type_computation_item"
        >
        <field name="account_type_set_id" ref="demo_trading_set" />
        <field name="computation_id" ref="computation_item_007" />
    </record>
</data>
</openerp>
